@using Wayfinder.Shared.Data.Entries.Descriptor;
@using Wayfinder.Shared.Libraries.BooleanTree;
@using Wayfinder.Client.Components.Standard;
@using Wayfinder.Client.Components.Application.Views;



<div component-name="DescriptorConditionsTreeEditor"
        style=@this.Style
        class="basic @(this.Disabled ? "disabled" : null)"
        @onclick=@(e => this.OnSelectTree(this.Tree))>
    @for( int i=0; i<this.Tree.Children.Count; i++ ) {
        IBoolean node = this.Tree.Children[i];

        @if( node is BooleanTree<DescriptorEntry> ) {
            <DescriptorConditionsTreeEditor
                    Disabled=@this.Disabled
                    Style="padding-left: 8px;"
                    Tree=@((BooleanTree<DescriptorEntry>)node)
                    OnSelectTree=@this.OnSelectTree />
        } else {
            <div>
                <DescriptorDisplay Descriptor=@((DescriptorEntry)node) />

                @if( i < (this.Tree.Children.Count - 1) ) {
                    <span>@(this.Tree.IsAnd ? " AND " : " OR ")</span>
                }
            </div>
        }
    }

    @if( this.Tree.IsAnd ) {
        <button disabled=@this.Disabled
                @onclick=@(async e => await this.AddTree_UI_Async(false))>
            OR
        </button>
    } else {
        <button disabled=@this.Disabled
                @onclick=@(async e => await this.AddTree_UI_Async(true))>
            AND
        </button>
    }
</div>
